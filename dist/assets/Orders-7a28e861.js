import{a as u,b as x,r as i,c as j,s as n,y as m,j as e}from"./index-cb054f78.js";const N=()=>{const[h,{isSuccess:l}]=u(),{data:c}=x(),[t,o]=i.useState({limit:5,skip:0}),[a,{isLoading:p,isError:b,isSuccess:v,error:f,data:d}]=j();return i.useEffect(()=>{n.on("palce-order",s=>{a(t)})},[]),i.useEffect(()=>{n.on("status-update",s=>{a(t)})},[]),i.useEffect(()=>{n.on("status-ResUpdate",s=>{a(t)})},[]),i.useEffect(()=>{l&&m.success("rider assign success")},[l]),i.useEffect(()=>{a(t)},[t]),e.jsxs("div",{className:" container mt-5",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{class:"form-select my-3 ",value:t.limit,onChange:s=>o({limit:+s.target.value,skip:0}),children:[e.jsx("option",{selected:!0,children:"Choose Limit"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"})]})})}),e.jsxs("div",{className:"table-responsive",children:[d&&e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Customer Mobile"}),e.jsx("th",{children:"Resturant Name"}),e.jsx("th",{children:"Resturant Mobile"}),e.jsx("th",{children:"Dish Name"}),e.jsx("th",{children:"Order Status"}),e.jsx("th",{children:"Rider"})]})}),e.jsx("tbody",{children:d.Orders.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.customer.name}),e.jsx("td",{children:s.customer.mobile}),e.jsx("td",{children:s.resturant.name}),e.jsx("td",{children:s.resturant.mobile}),e.jsx("td",{children:s.items.map(r=>e.jsx("div",{children:e.jsxs("div",{className:"d-block",children:[r.qty," x ",r.dish.name," x ",r.dish.price]})},r.id))}),e.jsx("td",{children:s.status}),e.jsx("td",{children:s.rider?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("strong",{children:s.rider.name})}),e.jsx("div",{children:e.jsx("strong",{children:s.rider.mobile})})]}):e.jsxs("select",{onChange:r=>h({_id:s._id,rider:r.target.value}),class:"form-select",children:[e.jsx("option",{selected:!0,children:"Choose Rider"}),c&&c.result.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})})]},s._id))})]}),d&&[...Array(Math.ceil(d.total/t.limit))].map((s,r)=>e.jsx("button",{type:"button",onClick:g=>o({...t,skip:r*t.limit}),className:`btn btn-sm me-1 ${r*t.limit===t.skip?"btn-primary":"btn-outline-primary"}`,children:r}))]})]})};export{N as default};
